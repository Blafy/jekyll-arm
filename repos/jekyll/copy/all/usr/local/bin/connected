#!/bin/sh
set -e

[ -f "/connected" ] && [ -f "/not-connected" ] &&  rm -f /not-connected /connected
([ "$CONNECTED" =  "true" ] || [ -f "/connected" ]) && exit 0
([ "$CONNECTED" = "false" ] || [ -f "/not-connected" ]) \
  && exit 1

# --
# If we aren't connected, or forced as connected, or not
# connected then we should check with WGet (because of Proxies)
# whether we are connected to the internet.
# --

if wget -qS https://google.com -O /dev/null 2>/dev/null; then
  touch /connected
  exit 0
else
  touch /not-connected
  exit 1
fi
